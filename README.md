# Centralized License Service

A multi-tenant License Service for managing licenses and entitlements across multiple brands in the group.one ecosystem.

This service acts as the single source of truth for licenses and entitlements across brands like WP Rocket, Imagify, RankMath, BackWPup, RocketCDN, WP.one, etc. It provides a centralized API for brand systems to provision and manage licenses, while allowing end-user products to activate and validate their licenses.

## üìñ Full Explanation & Detailed Design

For a comprehensive overview of the project, including its architecture, detailed design, trade-offs, and implementation specifics, please refer to the [Explanation Document](Explanation.md).

## üöÄ Getting Started

### Installation & Setup

For step-by-step instructions on how to set up the project locally, including environment requirements, dependency installation, and database setup, please see the [How to Run Locally](#how-to-run-locally) section in the `Explanation.md` file.

### Running the Project

To start the development server, run:

```bash
php artisan serve --host=0.0.0.0 --port=8002
```

The application will be accessible at `http://localhost:8002`.

### Generating Test Data

You can easily populate your local database with sample brands, products, license keys, licenses, and activations using the following Artisan command:

```bash
# Create test data interactively
php artisan app:create-test-data
```

This command will output the generated Brand API Key and sample UUIDs, which are essential for testing authenticated API endpoints.

## üìö API Documentation & Testing

### Interactive API Documentation

The project includes comprehensive API documentation generated using Laravel Scramble, which is accessible at:

- **üåê View Documentation**: `http://localhost:8002/docs/api`
- **üìÑ JSON Specification**: `http://localhost:8002/docs/api.json`

### Manual API Testing (Postman, cURL, or API Doc)

Brand-facing endpoints require authentication using the `X-Tenant: {BRAND_API_KEY}` header. Product-facing endpoints (license activation, status checking) do not require authentication.

After generating test data with `php artisan app:create-test-data`, you will receive a `BRAND_API_KEY`. Use this key to authenticate your requests.

**Example cURL requests:**

```bash
# List products for an authenticated brand
curl -H "X-Tenant: {YOUR_BRAND_API_KEY}" \
     http://localhost:8002/api/v1/products

# Create a new license for an authenticated brand
curl -X POST \
     -H "X-Tenant: {YOUR_BRAND_API_KEY}" \
     -H "Content-Type: application/json" \
     -d '{"license_key_uuid":"<license-key-uuid>","product_uuid":"<product-uuid>"}' \
     http://localhost:8002/api/v1/licenses

# Check license status (public endpoint - no authentication required)
curl http://localhost:8002/api/v1/license-keys/<license-key-uuid>/status
```
Replace `{YOUR_BRAND_API_KEY}`, `<license-key-uuid>`, and `<product-uuid>` with the actual values generated by the `app:create-test-data` command.

## ‚úÖ Running Tests

To run all automated tests (unit and feature), execute:

```bash
php artisan test
```

## üôè Conclusion

Thank you for reviewing this project. I've aimed to demonstrate a robust, scalable, and well-documented solution for a centralized license service within a multi-brand ecosystem.
